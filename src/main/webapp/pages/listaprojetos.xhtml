<ui:composition xmlns="http://www.w3.org/1999/xhtml"  
	xmlns:h="http://java.sun.com/jsf/html"  
 	xmlns:f="http://java.sun.com/jsf/core"  
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui" 
    xmlns:jsf="http://xmlns.jcp.org/jsf"
    xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
   	template="/templates/main.xhtml">
   	
    <ui:define name="content">
    	
        <h1 class="page-header"> 
        	<i class="fa fa-tachometer" /> 
        	Projetos
        </h1>
        
        <form jsf:id="form" jsf:prependId="false" class="form-horizontal">
        
 	        <p:remoteCommand id="rmcRemover" name="rmRemover" actionListener="#{mbProjeto.setProjetoId}" />
           	<p:remoteCommand id="rmcRemoverConfirma" name="rmConfirmaRemover" actionListener="#{mbProjeto.remover}" update="@form" onsuccess="alerta.sucesso('Projeto removido com sucesso!');" />
           	<p:remoteCommand id="rmcLimpar" name="rmConfirmaLimpar" actionListener="#{mbProjeto.limpar}" />
        
        	<!-- Modal -->
			<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
			  <div class="modal-dialog" role="document">
			    <div class="modal-content">
			      <div class="modal-header">
			        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true"></span></button>
			        <h4 class="modal-title" id="myModalLabel">Confirma exclusão?</h4>
			      </div>
			      <div class="modal-body">
			      	Deseja realmente excluir o projeto selecionado?
			      </div>
			      <div class="modal-footer">
			        <button type="submit" 
			        	class="btn btn-default" 
			        	data-dismiss="modal"
			        	onclick="rmConfirmaLimpar();">
        				Cancelar
        			</button>
        				
			        <button type="submit" 
			        	class="btn btn-primary"
			        	data-dismiss="modal"
						onclick="rmConfirmaRemover();">
			        	Confirmar
			        </button>
			        
			      </div>
			    </div>
			  </div>
			</div>
        
        	<table class="table table-striped">
        		<tr>
        			<td>Ações</td>
        			<td>Nome</td>
        			<td>Repositorio Git</td>
        			<td>Imagem Docker</td>
        		</tr>
        		<ui:repeat var="e" value="#{mbProjeto.projetos}">
        			<tr>
        				<td>
        					<button 
        						type="button" 
        						class="btn btn-default"
        						data-toggle="modal"
        						data-target="#myModal"
        						onclick="setIdRemover('#{e.id}')">
        						<span class="glyphicon glyphicon-remove" aria-hidden="true" />
        					</button>
	                    </td>
        				<td>#{e.nome}</td>
        				<td>#{e.repositorioGit}</td>
        				<td>#{e.nomeImagemDocker}</td>
        			</tr>
        		</ui:repeat>
        	</table>
        	
        	<div id="botoes" class="clearfix pull-right">
	        	<input class="btn btn-primary" 
	        		type="submit" 
	        		value="Novo" 
	        		jsf:id="btnNovoProjeto" 
	        		jsf:action="#{mbProjeto.novo}" />
        	</div>
        	
        </form>
        
        <script type="text/javascript">
       		function setIdRemover(id) {
       			rmRemover([{name:'id', value:id}]);
       		}
       	</script>
    </ui:define>
</ui:composition>